<!DOCTYPE html>
<html lang="en">
    <body style="margin:0px; padding:0px">
    <head>
        <meta charset="utf-8">
        <title>q-binomial coefficient calculator</title>
        <link rel="stylesheet" href="stylesheet.css">
        <script type="text/javascript" async 
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
        </script><!-- latex -->
        <script src="js/jquery.js"></script><!-- jquery -->
    </head>
    <header class="header">
        <nav id="gnav">
            <ul class="gnav">
                <div class="headerfont">
                    <li><a href="#top"><div class="fontchange" style="display: inline-block">q</div>-b.c. Calculator</a></li>
                    <li><a href="#calc">VISUALIZE</a></li>
                    <li><a href="#about">ABOUT</a></li>
                    <li><a href="#method">METHOD</a></li>
                    <li><a href="./simple.html" target="_blank" rel="noopener noreferrer">SIMPLE</a></li>
                </div>
            </ul>
        </nav>
    </header>
    <div id="blackback">
        <body bgcolor = "black", text = "white">
            <a id="top" class="atop"></a>
            <section class="effect-fade">
                <h1 class="title padding">
                </h1>
            </section>
            <section class="effect-fade">
                <div class="cp_iptxt cp_iptxt4n">
                    <input class="ef" id="inputn" type="text" placeholder="">
                    <label>n=</label>
                    <span class="focus_line"><i></i></span>
                </div>
                <div class="cp_iptxt cp_iptxt4k">
                    <input class="ef" id="inputk" type="text" placeholder="">
                    <label>k=</label>
                    <span class="focus_line"><i></i></span>
                </div>
                <div class="cp_iptxt cp_iptxt4q">
                    <input class="ef" id="inputq" type="text" placeholder="">
                    <label>q=</label>
                    <span class="focus_line"><i></i></span>
                </div>
                <br><br><br><br>
                <hr class="rline effect-slide-r"></hr>
                <div class="press" id="press"></div>
            </section> 

            <br><br><br><br><br>
            <button type="button" id="calbutton" class="calbutton effect-slide-l">calculate</button>
            <div class="error" id="error"></div>
            <br><br><br>
            <div class="math effect-fadeslow" style="display: inline-block">
            \[
            \binom{n}{k}_{q} = 
            \]
            </div>
            <textarea id="result1" type="text" class="resultlabel2" readonly>
                
            </textarea>
            <br><br><br><br><br><br><br><br><br><br><br><br>
            <button type="button" id="fmlbutton" class="calbutton effect-slide-l">formula</button><br><br><br>
            <div class="error2" id="error2">

            </div>
            <button type="button" id="copybutton" class="copybutton effect-fade">copy</button>
            <div class="math effect-fadeslow" style="display: inline-block">
            \[
            \binom{n}{k}_{q} = 
            \]
            </div>
            <textarea id="result2" type="text" class="resultlabel2" readonly>
                
            </textarea>
            <br><br><br><br><br><br><br><br><br><br><br><br>
            <a id="calc" class="acalc"></a>
            <button type="button" id="visbutton" class="calbutton effect-slide-l">visualize</button><br><br><br><br><br><br>
            <div class="error3" id="error3">

            </div>

            <div class="wrap-chart">
                <div class="chart-container" style="position: relative; width: 100%;height:400pt">
                    <canvas id="chart01"></canvas>            
                </div>
            </div>
            <br><br><br><br><br><br>
        </body>
    </div>
    <div id="whiteback">
        <a id="about" class="aabout"></a>
        <div class="about">About</div><br><br><br><br><br><br><br>
        <hr class="aboutline" id="aboutline"></hr>
        <br><br><br><br><br><br><br><br><br>
        <div class="notice1 fade_off" id ="notice1">
            This calculator is developed by Yodai Suzuki. 
            It can perform calculations of q-binomial coefficients and polynomials in q that give values of q-binomial coefficients. 
            It also can perform a visualization of “q-binomial distribution”. 
            It uses the algorithm which calculates q-binomial coefficients and polynomials with time complexity O(n^2).
        </div><br><br><br><br>
        <div class="notice2 fade_off" id="notice2">
            The q-binomial coefficient is also called “Gaussian binomial coefficient”. 
            They are q-analogs of the binomial coefficients. A q-analog is a kind of generalizations which introduce new parameter “q” to some mathematical objects. 
            In a q-analog, q-extended-objects must be the same as the original objects in the limit as q→1. For example, q-number([n]<sub>q</sub>) is defined by the following equation.
            \[
            [n]_{q}=\frac{1-q^{n}}{1-q}
            \]
            The q-factorial and the q-binomial coefficient are defined by the following equation.
            \[
            [n]!_{q}=\prod_{k=1}^{n} [k]_{q}
            \\
            \binom{n}{k}_{q} = \frac{[n]!_{q}}{[k]!_{q}[n-k]!_{q}}
            \]
        </div><br><br><br><br><br>
        <div class="notice3 fade_off" id="notice3">
            There are many interpretations of the q-binomial coefficient. 
            The most typical one is understanding the q-binomial coefficient as the number of k-dimensional subspaces of the n-dimensional vector space over the q-element field. 
            It is also important that the coefficient of the polynomial which corresponds to q<sup>i</sup> is equal to the number of “(n-k)*k Young diagram" patterns which contain i blocks. 
            See “Method” for a detailed explanation.
        </div><br><br><br><br><br>
    </div>
    <div id="blackback">
        <div class="method">Method</div><br><br><br><br><br><br><br><br>
        <a id="method" class="amethod"></a>
        <hr class="methodline" id="methodline"></hr>
        <br><br><br>
        <div class="explanation1">
            1. The value of the q-binomial coefficient
        </div><br><br><br><br>
        <div class="explanation2">
            Here is the well-known equation of binomial coefficients.
            \[
            \binom{n}{k}=\binom{n-1}{k}+\binom{n-1}{k-1} \ \ \ \ \ ......(1)
            \]
            The following equation which is similar to (1) is true.
            \[
            \binom{n}{k}_{q}=q^{k}\binom{n-1}{k}+\binom{n-1}{k-1} \ \ \ \ \ ......(2)
            \]
            <div class="mathmargin2">(proof)<br></div>
            <div class="mathmargin">
                \[
                {
                    q^{k}\binom{n-1}{k}+\binom{n-1}{k-1} \\
                    = q^{k}\frac{[(n-1)]!_{q}}{[k]!_{q}[n-k-1]!_{q}} + \frac{[(n-1)]!_{q}}{[k-1]!_{q}[n-k]!_{q}} \\
                    = \frac{[(n-1)]!_{q}}{[k]!_{q}[n-k]!_{q}} \left( q^{k}[n-k]_{q}+[k]_{q} \right) \\
                    = \frac{[(n-1)]!_{q}}{[k]!_{q}[n-k]!_{q}} \left( q^{k}\frac{1-q^{n-k}}{1-q} + \frac{1-q^{k}}{1-q} \right) \\
                    = \frac{[(n-1)]!_{q}}{[k]!_{q}[n-k]!_{q}} \left( \frac{1-q^{k}+q^{k}-q^{n}}{1-q} \right) \\
                    = \frac{[(n-1)]!_{q}}{[k]!_{q}[n-k]!_{q}} \left( \frac{1-q^{n}}{1-q} \right) \\
                    = \frac{[n]_{q}[n-1]!_{q}}{[k]!_{q}[n-k]!_{q}} \\
                    = \frac{[n]!_{q}}{[k]!_{q}[n-k]!_{q}} \\
                    = \binom{n}{k}_{q} \ \ \ \ \ \  \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ■
                }
                \]
            </div>
            This calculator calculates the value of the q-binomial coefficient by using the equation (2). 
            At first, it calculates the value of q<sup>i</sup> and saves it in powq[i] variable. 
            Next, it generates the two dimensional array named comq[i][j] and initializes comq[i][0] to 1. 
            By using the value of powq, it calculates the value of “comq[i-1][j-1]+powq[j]*comq[i-1][j]”, and this value is exactly equal to comq[i][j]. 
            By using the preceding algorithm, it is possible to calculate the value of the q-binomial coefficient with time complexity O(n^2).
        </div>
        <div class="explanation1"> <br><br><br>
            2. The polynomial of the q-binomial coefficient
        </div><br><br><br>
        <div class="explanation2">
            Before the calculation of the polynomial, consider the S(n,k) which is “staircase”. It suffices the following proposition. Let P(i,j) be a element of the S(n,k).<br>
            1.	S(n,k) is a set which contains lattice points.<br>
            2.	Both i and j suffice 1<=i<=(n-k) and 1<=j<=k.<br>
            3.	S(i-1,j) is a element of the S(n,k). (i>=2)<br>
            4.	The number of elements which suffice j=J is larger than or equal to that of elements which suffice j=J+1. <br><br>
            Let n be 12, and k be 5. The following diagram (1) is the example of the S(n,k). <br><br>
            <img src="diagram1.png" alt="diagram1" class="diagram1">
            <img src="diagram2.png" alt="diagram2" class ="diagram2"><br><br>
            If we substitute boxes for points, this diagram will be easier to understand(diagram (2)). It exactly seems a “staircase”. This is also called “Young diagram”.<br><br>
            Let C(n,k,i) be the patterns of the S(n,k) which contains i boxes or points. 
            And let Q(n,k,i) be the coefficient of (n k)q which corresponds to the q<sup>i</sup>. 
            C(n,k,i) is equal to Q(n,k,i). This fact is very important and useful when we calculates the polynomial of the q-binomial coefficient.
            <br><br><br>
            <strong>Theorem 1.</strong> C(n,k,i)=Q(n,k,i) <br><br>
            <div class="mathmargin2">(proof)<br></div>
            <div class="mathmargin">
                    When n is equal to 1, let the number of the staircases which contains 0 blocks be 1.
                    The number of those which contains 1 blocks is 1. 
                    These correspondent to the value of (1 0)<sub>q</sub> and (1 1)<sub>q</sub>.
                    Remark recurrence relations of C(n,k,i) and Q(n,k,i).
                    It is obvious from (2) that Q(n,k,i) suffices the following equation (3).
                    \[
                    {
                    Q(n,k,i) = \\
                    \ \ Q(n-1, k, i-k)+Q(n-1, k-1, i) \ \ \  (i>=k) \ \ \ ……(3)     \\
                    \ \ Q(n-1,k-1,i)\ \ \ (i < k) \ \ \ \ \ \ \                 
                    }
                    \]
                    Following considerations about C(n,k,i) are true.<br>
                    1.	Staircases can be classified into two groups according to whether they contain (1,k) or not.<br>
                    2.	The number of the staircases which contain (1,k) is equal to the number of those which delete one column and reduce k blocks. <br>
                    3.	The number of the those which doesn’t contain (1,k) is equal to the number of those which delete one row.<br>
                    The following equation holds because of considerations 2 and 3.<br>
                    \[
                    {
                        C(n,k,i)= \\
                        \ \ C(n-1,k,i-k)+C(n-1,k-1,i)\ \ \ (i>=k) \\
                        \ \ C(n-1,k-1,i)\ \ \ (i < k)
                    }
                    \]
                    Q(n,k,i) and C(n,k,i) suffice the same reccurence relation. Therefore, Q(n,k,i) is equal to C(n,k,i).　■
            </div><br><br>
            For the calculation of the q-binomial coefficients, we need to show the following lemma1 and lemma2.<br><br>
            <strong>Lemma 1.</strong>　Q(n,k,i)=Q(n,k,k(n-k)-i)<br><br>
            <div class="mathmargin2">(proof)</div><br>
            <div class="mathmargin">Think of the “reversal “of the deviation of i. 
                To reverse the deviation, remove all tiles, put tiles in the all position which no tile have put in (diagram(2) to diagram(3)).
                Then rotate the whole diagram 180 degrees (diagram(3) to diagram(4)).
                Let i be the number of tiles which was contained in the previous diagram. 
                New diagram which is created by the preceding process contains k(n-k)-i tiles. 
                By using these steps, the bijection from the deviation which contains i tiles to that which contains k(n-k)-i tiles was materialized. 
                Therefore C(n,k,i) is equal to C(n,k,k(n-k)-i). By using theorem 1, Q(n,k,i) is equal to Q(n,k,k(n-k)-i).　■
            </div><br>
            <img src="diagram2.png" alt="diagram3" class="diagram3">
            <img src="diagram3.png" alt="diagram3" class="diagram3">
            <img src="diagram4.png" alt="diagram4" class ="diagram3"><br><br>    
            <strong>Lemma 2.</strong>　Q(n,k,i-1) <= Q(n,k,i)　(When i <= k(n-k)/2) <br><br>
            <div class="mathmargin2">(proof)</div><br>
            <div class="mathmargin">
                Use the mathematical induction. When it holds when n=N-1 and k=K-1, the following equations are true.<br>
                \[
                {
                Q(N,K, \tfrac{K(N-K)}{2}-1)=Q(N-1,K-1, \tfrac{K(N-K)}{2}-1)+Q(N-1,K,\tfrac{K(N-K-2)}{2}-1) \\
                Q(N,K,\tfrac{K(N-K)}{2})=Q(N-1,K-1,\tfrac{K(N-K)}{2})+Q(N-1,K,\tfrac{K(N-K-2)}{2})        
                }        
                \]
                If we use Lemma1 adequately, we can apply Lemma2 to each terms of the right side. 
                It is clear that Lemma2 holds when k=0 or i=-1. Therefore Lemma2 holds for all n,k and i.
                　■
            </div><br>
            By using these two lemmas, the following Corollary 1 is easily deduced.<br><br>
            <strong>Corollary 1. </strong>Q(n,k,i) is maximized when i is equal to k(n-k)/2.<br><br>
            We can prove the following theorem by using Corollary 1.<br><br>
            <strong>Theorem 2.</strong>  Q(n,k,i) <= <sub>n</sub>C<sub>k</sub> <br><br>
            <div class="mathmargin2">(proof)</div><br>
            <div class="mathmargin">
                
                    From Corollary1, this theorem can be proved if we prove it when i is equal to k(n-k)/2. 
                    Use the matimatical induction. Let it hold when n=N-1 and k=K-1, K.<br>
                    \[
                    {
                    Q(N,K,\tfrac{K(N-K}{2})=Q(N-1,K-1,\tfrac{K(N-K)}{2})+Q(N-1,K,\tfrac{K(N-K-2)}{2}) \\
                    < Q(N-1,K-1,\tfrac{(K-1)(N-K)}{2})+Q(N-1,K,\tfrac{K(N-K-1)}{2}) \\
                    < \binom{N-1}{K-1}+\binom{N-1}{K} \\
                    =\binom{N}{K}
                    }
                    \]
                    When k = 0, it cleary holds because Q(n,0,i) = 1 = <sub>n</sub>C<sub>0</sub>. 
                    It also holds when i=0 because Q(n,k,0)=1 =< <sub>n</sub>C<sub>k</sub>. 
                    Therefore Theorem 2 holds for all n,k and i.
                
            </div><br><br>

            Using theorem 2, Q(n,k,i) is equal to or less than nCk. 
            That means we can calculate the polynomial of the q-binomial coefficients by using the following steps with time complexity O(n^2).<br><br>
            1.   Initialize i to 0. Substitute temp for (n k)_q. Let q be <sub>n</sub>C<sub>k</sub>.<br>
            2.	 The coefficient of q^i is temp % q.<br>
            3.	 Substitute temp for temp / q.<br>
            4.	 Finish if temp is equal to zero. Otherwise substitute i for i+1, and back to the step 2.<br><br>
            This is how it calculates the polynomial of the q-binomial coefficients.<br><br>
            
            We can calculate it in another way.
            This calculator used theorem 1 when it calculates Q(n,k,i) in an obsoleted method. 
            It counts the number of the staircases which corresponds n, k and i
            (It is possible to calculates the value of Q(n,k,i) by using the equation (3), but it is more intuitive to correspond the number of the staircases.).
            <br><br>
            At first, it prepares a three-dimensional array dp[n-k][i][k].
            The variable n-k is the number of columns,  variable i is the number of blocks, k is the number of columns.
            Dp[n-k][i][k] is the number of the staircase patterns which contains i blocks, exactly has k columns, exactly contains n-k blocks in the first row. 
            When n-k is equal to 1, dp[i][j’][j’’] is equal to δ<sub>j’j’’</sub>(δ<sub>j’j’’</sub> is called Kronecker delta). 
            Remark the value of dp[N-K,I,K]. When we add one line to the staircase, the new line must contain N-K blocks and the second line must contain less than or equal to N-K blocks. 
            Therefore, the following eqution holds. 
            \[
            {
            dp[N-K,I,K]=\sum_{k'=0}^{K} \ dp[N-K,I-N+K,K-k’] \ \ ……(4)
            }
            \]
            We can calculate dp[N-K,I,K] with time complexity O(1) by using comulative sum. 
            We can calculate the polynomial of q-binomial coefficient with time complexity O(n^4) which is equal to the number of dp elements(More exactly, we can calculate with time complexity O(k^2(n-k)^2).
            <br><br><br>
            By considering the correspondence to the staircase, it is obvious that q-binomial coefficient represents the number of an integer partition. 
            In other words, the coefficient of q<sup>i</sup> which appears in (n k)<sub>q</sub> is equal to “the pattern of the paritition which divides i into k integers that are less than or equal to n-k”. 
            This is very important fact that relates Rogers-Ramanujan identities.
            </div> 
            <br><br><br>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="smoothscroll.js"></script>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
</body>
</html>
